local TweenService = game:GetService("TweenService")
local player = game.Players.LocalPlayer

-- GUI
local gui = Instance.new("ScreenGui", game.CoreGui)
gui.Name = "BerkHubGodModeGUI"

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 220, 0, 120)
frame.Position = UDim2.new(0.1, 0, 0.1, 0)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BackgroundTransparency = 0.1
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true

-- "-" Butonu
local minimizeBtn = Instance.new("TextButton", frame)
minimizeBtn.Size = UDim2.new(0, 25, 0, 25)
minimizeBtn.Position = UDim2.new(1, -30, 0, 5)
minimizeBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
minimizeBtn.Text = "-"
minimizeBtn.TextSize = 20
minimizeBtn.Font = Enum.Font.GothamBold
minimizeBtn.TextColor3 = Color3.new(1, 1, 1)
minimizeBtn.BorderSizePixel = 0
minimizeBtn.TextStrokeTransparency = 0.4

-- Başlık
local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1, 0, 0.3, 0)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundTransparency = 1
title.Font = Enum.Font.GothamBold
title.Text = "BerkHub - God Mode"
title.TextSize = 20
title.TextStrokeTransparency = 0
title.TextColor3 = Color3.fromRGB(255, 255, 255)

-- Buton
local toggleBtn = Instance.new("TextButton", frame)
toggleBtn.Size = UDim2.new(0.8, 0, 0.4, 0)
toggleBtn.Position = UDim2.new(0.1, 0, 0.5, 0)
toggleBtn.Font = Enum.Font.GothamBold
toggleBtn.TextSize = 18
toggleBtn.TextStrokeTransparency = 0.3
toggleBtn.TextColor3 = Color3.new(1, 1, 1)
toggleBtn.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
toggleBtn.Text = "God Mode: ON"
toggleBtn.BorderSizePixel = 0

-- Rainbow Efekti
spawn(function()
	while true do
		local hue = tick() % 5 / 5
		local color = Color3.fromHSV(hue, 1, 1)
		title.TextColor3 = color
		toggleBtn.TextColor3 = color
		minimizeBtn.TextColor3 = color
		wait(0.1)
	end
end)

-- God Mode Sistemi
local godMode = true

local function applyGodMode()
	local character = player.Character or player.CharacterAdded:Wait()
	local humanoid = character:WaitForChild("Humanoid", 5)
	if humanoid then
		-- Sürekli Can Full Kalması İçin
		humanoid.MaxHealth = math.huge
		humanoid.Health = math.huge

		-- Her frame'de tekrar etmek için loop
		if not humanoid:FindFirstChild("GodLoop") then
			local tag = Instance.new("BoolValue", humanoid)
			tag.Name = "GodLoop"

			game:GetService("RunService").Heartbeat:Connect(function()
				if godMode and humanoid and humanoid.Health < humanoid.MaxHealth then
					humanoid.Health = humanoid.MaxHealth
				end
			end)

			-- Hasar aldığında tekrar max health ayarlama
			humanoid.HealthChanged:Connect(function()
				if humanoid.Health < humanoid.MaxHealth then
					humanoid.Health = humanoid.MaxHealth
				end
			end)
		end
	end
end

-- Tek vuruşla öldüren partlara karşı engel
local function protectFromDamage(part)
	part.Touched:Connect(function(hit)
		local character = hit.Parent
		local humanoid = character:FindFirstChildOfClass("Humanoid")
		if humanoid and humanoid.Health > 0 then
			-- God Mode aktifse ve part'a dokunulursa canı tekrar sonsuz yap
			if godMode then
				humanoid.Health = humanoid.MaxHealth
			end
		end
	end)
end

-- Tek vuruşla öldüren partları bul ve koru
for _, part in pairs(workspace:GetDescendants()) do
	if part:IsA("Part") and part:FindFirstChild("Damage") then
		protectFromDamage(part)
	end
end

-- Yeni bir parça geldiğinde kontrol et
workspace.DescendantAdded:Connect(function(descendant)
	if descendant:IsA("Part") and descendant:FindFirstChild("Damage") then
		protectFromDamage(descendant)
	end
end)

-- Toggle God Mode
local function toggleGodMode()
	godMode = not godMode
	if godMode then
		toggleBtn.Text = "God Mode: ON"
		toggleBtn.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
		applyGodMode()
	else
		toggleBtn.Text = "God Mode: OFF"
		toggleBtn.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
		local char = player.Character
		if char then
			local humanoid = char:FindFirstChildOfClass("Humanoid")
			if humanoid then
				humanoid.MaxHealth = 100
				humanoid.Health = 100
			end
		end
	end
end

toggleBtn.MouseButton1Click:Connect(toggleGodMode)

-- "-" Butonu Tween
local minimized = false
local originalSize = frame.Size
local minimizedSize = UDim2.new(0, 220, 0, 40)

minimizeBtn.MouseButton1Click:Connect(function()
	minimized = not minimized
	local goalSize = minimized and minimizedSize or originalSize
	local tween = TweenService:Create(frame, TweenInfo.new(0.4, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Size = goalSize})
	tween:Play()
	toggleBtn.Visible = not minimized
end)
